
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <title>Hotels Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #f7fafc, #edf2f7);
        }
        .header {
            background: #2b6cb0;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            margin: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .dropdown {
            text-align: center;
            margin: 20px;
        }
        .dropdown select {
            padding: 10px;
            font-size: 1.2em;
        }
        .chart-section {
            background: white;
            margin: 20px;
            padding: 20px;
            border: 2px solid #2b6cb0;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .metrics-box {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            background: white;
            padding: 20px;
            margin: 20px;
            border: 2px solid #2b6cb0;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .metrics-box div {
            text-align: center;
            margin: 10px;
        }
        .metrics-box h2 {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Hotels Dashboard</h1>
    </div>
    <div class="dropdown">
        <label for="hotelSelect"><strong>Otel Seçin:</strong></label>
        <select id="hotelSelect" onchange="updateDashboard()">
            <option value="BALAT">PETRION HOTEL BALAT</option>
            <option value="NIS">NIS TAKSIM</option>
            <option value="ESKICILER">ISPARTA ESKICILER KONAGI</option>
        </select>
    </div>
    <div id="dashboard">
        <!-- Content updates dynamically based on the selected hotel -->
    </div>
    <script>
        const hotelsData = {
            "BALAT": {
                "title": "PETRION HOTEL BALAT",
                "totalRevenue": 240633.29,
                "channelsSummary": {
                    "Booking.Com (%15)": 130055.0,
                    "Kendi Satışlarım": 39857.0,
                    "Expedia (%18)": 28136.0,
                    "Walk-in": 19366.0,
                    "Telefon": 5443.0,
                    "SabeeApp Rezervasyon Motoru": 6348.0,
                    "MEHMET KAFE KOMŞU": 1253.0,
                    "iptal - no show parasi": 256.0,
                    "OtelZ (%15)": 861.0,
                    "Ets / Odamax (%15)": 414.0,
                    "SİMO BEY": 1072.0,
                    "E-mail": 176.0
                },
                "monthlyRevenue": [
                    ["January", 9338.04, 505.83],
                    ["February", 10823.11, 254.48],
                    ["March", 9769.34, 180.82],
                    ["April", 27294.72, 518.87],
                    ["May", 32006.96, 663.90],
                    ["June", 15608.59, 465.30],
                    ["July", 15610.94, 520.62],
                    ["August", 19096.07, 350.68],
                    ["September", 26052.74, 774.20],
                    ["October", 28696.96, 998.82],
                    ["November", 21364.84, 640.79],
                    ["December", 17614.00, 1474.00]
                ],
                "occupancy": [23.34, 31.24, 27.32, 64.71, 67.93, 33.73, 34.16, 45.73, 63.92, 72.87, 56.08, 45.35]
            },
            "NIS": {
                "title": "NIS TAKSIM",
                "totalRevenue": 249645.20,
                "channelsSummary": {
                    "Kendi Satışlarım": 31909.00,
                    "Booking.Com (%15)": 146326.00,
                    "SabeeApp Rezervasyon Motoru": 1545.00,
                    "Telefon": 7620.00,
                    "Expedia (%18)": 60279.00,
                    "iptal - no show parası": 1023.00,
                    "VTS TURİZM LTD.ŞTİ.": 324.00,
                    "Walk-in": 295.00
                },
                "monthlyRevenue": [
                    ["Ocak", 13980.24, 0],
                    ["Şubat", 14416.88, 0],
                    ["Mart", 12232.32, 0],
                    ["Nisan", 18957.82, 0],
                    ["Mayıs", 30435.64, 0],
                    ["Haziran", 22783.79, 0],
                    ["Temmuz", 22606.91, 0],
                    ["Ağustos", 25050.69, 0],
                    ["Eylül", 26194.22, 0],
                    ["Ekim", 25533.85, 0],
                    ["Kasım", 19634.84, 0],
                    ["Aralık", 17818.00, 0]
                ],
                "occupancy": [52.18, 62.07, 47.44, 59.8, 82.16, 71.76, 67.36, 76.28, 84.31, 84.44, 66.27, 55.03]
            },
            "ESKICILER": {
                "title": "ISPARTA ESKICILER KONAGI",
                "totalRevenue": 4445072.54,
                "channelsSummary": {
                    "Kendi Satışlarım": 1952276.00,
                    "Booking.Com (%15)": 681603.00,
                    "SabeeApp Booking Engine": 370219.00,
                    "Telephone": 309986.00,
                    "Expedia (%18)": 412289.00,
                    "E-mail": 192002.00,
                    "Ets / Odamax (%15)": 181378.00,
                    "OtelZ (%15)": 73713.00,
                    "Walk-in": 77487.00,
                    "TatilSepeti": 10312.00,
                    "iptal - no show": 11294.00
                },
                "monthlyRevenue": [
                    ["Ocak", 76095.40, 785.00],
                    ["Şubat", 136029.83, 3434.00],
                    ["Mart", 153104.97, 1900.00],
                    ["Nisan", 413950.47, 26425.00],
                    ["Mayıs", 413776.43, 20832.00],
                    ["Haziran", 749607.31, 30475.00],
                    ["Temmuz", 570552.24, 11314.00],
                    ["Ağustos", 671832.91, 6838.00],
                    ["Eylül", 412862.96, 53710.00],
                    ["Ekim", 287901.93, 12165.00],
                    ["Kasım", 187947.09, 2566.00],
                    ["Aralık", 198933.00, 2034.00]
                ],
                "occupancy": [5.26, 8.89, 9.51, 22.81, 21.9, 39.12, 23.77, 28.01, 20.7, 11.88, 9.82, 7.47]
            }
        };

        // Function to update the dashboard
        function updateDashboard() {
            const selectedHotel = document.getElementById("hotelSelect").value;
            const data = hotelsData[selectedHotel];

            // Prepare channel summary table
            let channelSummaryHtml = "";
            for (const [channel, value] of Object.entries(data.channelsSummary)) {
                channelSummaryHtml += `<tr><td>${channel}</td><td>TRY ${value.toFixed(2)}</td></tr>`;
            }

            // Update the dashboard content
            document.getElementById("dashboard").innerHTML = `
                <div class="metrics-box">
                    <div>
                        <h2>${data.title} - Toplam Brüt Gelir</h2>
                        <p>TRY ${data.totalRevenue.toFixed(2)}</p>
                    </div>
                    <div>
                        <h2>Kanal Gelir Özeti (Yıllık)</h2>
                        <table border="1" style="margin: 0 auto; border-collapse: collapse; text-align: left;">
                            <thead>
                                <tr><th>Kanal</th><th>Toplam Gelir</th></tr>
                            </thead>
                            <tbody>
                                ${channelSummaryHtml}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="chart-section">
                    <h2>Aylık Gelir Dağılımı</h2>
                    <div id="bar_chart" style="width:100%; height:500px;"></div>
                </div>
                <div class="chart-section">
                    <h2>Aylara Göre Doluluk Oranı</h2>
                    <div id="line_chart" style="width:100%; height:500px;"></div>
                </div>
                <div class="chart-section">
                    <h2>Kanal Gelir Dağılımı</h2>
                    <div id="pie_chart" style="width:100%; height:500px;"></div>
                </div>
            `;

            // Render bar chart for monthly revenue
            const barData = [
                {
                    x: data.monthlyRevenue.map(item => item[0]),
                    y: data.monthlyRevenue.map(item => item[1]),
                    name: "Konaklama",
                    type: "bar"
                },
                {
                    x: data.monthlyRevenue.map(item => item[0]),
                    y: data.monthlyRevenue.map(item => item[2]),
                    name: "Hizmetler",
                    type: "bar"
                }
            ];
            Plotly.newPlot("bar_chart", barData, { title: `${data.title} - Aylık Gelir`, barmode: "stack" });

            // Render line chart for occupancy
            const lineData = [
                {
                    x: data.monthlyRevenue.map(item => item[0]),
                    y: data.occupancy,
                    type: "scatter",
                    mode: "lines+markers",
                    name: "Doluluk Oranı"
                }
            ];
            Plotly.newPlot("line_chart", lineData, { title: `${data.title} - Doluluk Oranı` });

            // Render pie chart for channel revenue
            const pieData = [
                {
                    labels: Object.keys(data.channelsSummary),
                    values: Object.values(data.channelsSummary),
                    type: "pie",
                    name: "Kanal Gelir Dağılımı"
                }
            ];
            Plotly.newPlot("pie_chart", pieData, { title: `${data.title} - Kanal Gelir` });
        }

        // Initialize the dashboard with the first hotel
        updateDashboard();
    </script>
</body>
</html>
"""

